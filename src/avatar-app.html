<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/iron-overlay-behavior/iron-overlay-behavior.html">
<link rel="import" href="../bower_components/iron-behaviors/iron-button-state.html">
<link rel="import" href="../bower_components/iron-behaviors/iron-control-state.html">
<link rel="import" href="../bower_components/iron-dropdown/iron-dropdown.html">
<link rel="import" href="../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../bower_components/iron-meta/iron-meta.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/vaadin-upload/vaadin-upload.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-jsonp-library/iron-jsonp-library.html">





<link rel="import" href="my-icons.html">

<dom-module id="avatar-app">
  <template>
    <style include="app-grid-style">
      :host {
        display: block;
      
      }
      #page{
         --app-grid-columns: 2;
         --app-grid-item-height: 100px;
      }
      #form{
         --app-grid-columns: 1;
         --app-grid-item-height: 100px;
      }
    </style>


  <div id="page" style="height:100vh;">

    <h3>Your image</h3>

    <div id="myImage"></div>
    
    <div>

      <paper-dropdown-menu label="Your Country" style="width:100%">
        <paper-listbox slot="dropdown-content" id="countryOption" selected="{{country}}" on-click="downloadGDGList">
          <paper-item>allosaurus</paper-item>
          <paper-item>brontosaurus</paper-item>
          <paper-item>carcharodontosaurus</paper-item>
          <paper-item>diplodocus</paper-item>
        </paper-listbox>
      </paper-dropdown-menu>

      <paper-dropdown-menu label="Your GDG" style="width:100%">
        <paper-listbox slot="dropdown-content" selected="{{gdg}}" on-click="handleClick">
          <paper-item>allosaurus</paper-item>
          <paper-item>brontosaurus</paper-item>
          <paper-item>carcharodontosaurus</paper-item>
          <paper-item>diplodocus</paper-item>
        </paper-listbox>
      </paper-dropdown-menu>

      <div class="form-group">
        <input type="file" id="uploadimage" accept="image/*;capture=camera">
        <div>
          <input type="text" readonly="" placeholder="Please select a file...">
          <span >
            <button type="button">
              <i>attach_file</i>
            </button>
          </span>
        </div>
      </div> 

    </div>
  </div>

  <!--<iron-ajax
    auto
    url="https://hub.gdgx.io/api/v1/chapters/country/it?perpage=999&fields=_id,name&asc=-1"
    method="GET"
    handle-as="json"
    on-response="handleResponse"
    debounce-duration="300"></iron-ajax>-->

    <!--<iron-jsonp-library
  library-url="https://hub.gdgx.io/api/v1/chapters/country/it?perpage=999&fields=_id,name&asc=-1?callback=%%callback%%"
  notify-event="api-load"
  callback-name="callback"
  library-loaded="{{loaded}}"></iron-jsonp-library>-->

  </template>



  <script>
    /**
     * `avatar-app`
     * shell page
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class AvatarApp extends Polymer.Element {
      static get is() { return 'avatar-app'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'avatar-app'
          },
          country:{
            type: Number,
            notify:true,
          }
        };
      }

      createde(){
          console.log("created");
      }

      callback(){
          console.log("ajax end");
      }

      handleClick() {
          console.log(this.gdg);
      }

      handleRespons(){
        console.log("ajax response");
      }

      show() {
        this.$.paese.toggle();
      }
      
      downloadGDGList(){
        $.ajax( { url: "https://hub.gdgx.io/api/v1/chapters/country/it?perpage=999&fields=_id,name&asc=-1",
                  type: "GET",
                  dataType: "jsonp",
                  async: false,
                  success: function(result){
                    console.log(result);
                  },
                  error: function(error){
                      console.log(error);
                  }
                }
              );
      }
      
    }

    window.customElements.define(AvatarApp.is, AvatarApp);
  </script>
</dom-module>

